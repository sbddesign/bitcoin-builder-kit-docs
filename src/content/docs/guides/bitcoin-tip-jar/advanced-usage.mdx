---
title: Advanced Usage
description: Advanced features and integrations for Bitcoin Tip Jar
---

# Advanced Usage

Explore advanced features, integrations, and custom implementations of Bitcoin Tip Jar.

## Analytics Integration

### JavaScript (Web Components)

```javascript
// Analytics integration
class AnalyticsTipJar extends HTMLElement {
  constructor() {
    super();
    this.tipJar = document.createElement('bitcoin-tip-jar');
    this.setupAnalytics();
  }

  setupAnalytics() {
    this.tipJar.addEventListener('tip-initiated', (event) => {
      // Google Analytics
      if (typeof gtag !== 'undefined') {
        gtag('event', 'tip_initiated', {
          event_category: 'bitcoin_tip',
          event_label: event.detail.amount,
          value: event.detail.amount
        });
      }

      // Custom analytics
      this.trackEvent('tip_initiated', {
        amount: event.detail.amount,
        currency: event.detail.currency,
        timestamp: new Date().toISOString()
      });
    });

    this.tipJar.addEventListener('tip-completed', (event) => {
      this.trackEvent('tip_completed', {
        amount: event.detail.amount,
        transactionId: event.detail.transactionId,
        timestamp: new Date().toISOString()
      });
    });
  }

  trackEvent(eventName, data) {
    // Send to your analytics service
    fetch('/api/analytics', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ event: eventName, data })
    });
  }

  connectedCallback() {
    this.appendChild(this.tipJar);
  }
}

customElements.define('analytics-tip-jar', AnalyticsTipJar);
```

### React

```tsx
import { BitcoinTipJar } from '@bitcoin-tip-jar/react';
import { useEffect } from 'react';

function AnalyticsTipJar() {
  useEffect(() => {
    // Initialize analytics
    const initAnalytics = () => {
      // Google Analytics setup
      if (typeof gtag !== 'undefined') {
        gtag('config', 'GA_MEASUREMENT_ID');
      }
    };

    initAnalytics();
  }, []);

  const handleTipInitiated = (event) => {
    // Track tip initiation
    if (typeof gtag !== 'undefined') {
      gtag('event', 'tip_initiated', {
        event_category: 'bitcoin_tip',
        event_label: event.detail.amount,
        value: event.detail.amount
      });
    }

    // Custom analytics
    fetch('/api/analytics', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        event: 'tip_initiated',
        data: {
          amount: event.detail.amount,
          currency: event.detail.currency,
          timestamp: new Date().toISOString()
        }
      })
    });
  };

  const handleTipCompleted = (event) => {
    // Track successful tip
    if (typeof gtag !== 'undefined') {
      gtag('event', 'tip_completed', {
        event_category: 'bitcoin_tip',
        event_label: event.detail.amount,
        value: event.detail.amount
      });
    }
  };

  return (
    <BitcoinTipJar
      address="bc1qxy2kgdygjrsqtzq2n0yrf2493p83kkfjhx0wlh"
      amount={0.0001}
      onTipInitiated={handleTipInitiated}
      onTipCompleted={handleTipCompleted}
    />
  );
}
```

## Webhook Integration

```javascript
// Webhook integration for real-time notifications
class WebhookTipJar extends HTMLElement {
  constructor() {
    super();
    this.tipJar = document.createElement('bitcoin-tip-jar');
    this.setupWebhooks();
  }

  setupWebhooks() {
    this.tipJar.addEventListener('tip-completed', async (event) => {
      try {
        const response = await fetch('/api/webhooks/bitcoin-tip', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${this.getAttribute('api-key')}`
          },
          body: JSON.stringify({
            amount: event.detail.amount,
            address: event.detail.address,
            transactionId: event.detail.transactionId,
            timestamp: new Date().toISOString()
          })
        });

        if (response.ok) {
          console.log('Webhook sent successfully');
        }
      } catch (error) {
        console.error('Webhook failed:', error);
      }
    });
  }

  connectedCallback() {
    this.appendChild(this.tipJar);
  }
}

customElements.define('webhook-tip-jar', WebhookTipJar);
```

## Multi-Currency Support

```tsx
import { BitcoinTipJar } from '@bitcoin-tip-jar/react';
import { useState, useEffect } from 'react';

function MultiCurrencyTipJar() {
  const [exchangeRate, setExchangeRate] = useState(null);
  const [selectedCurrency, setSelectedCurrency] = useState('btc');

  useEffect(() => {
    // Fetch exchange rates
    const fetchExchangeRates = async () => {
      try {
        const response = await fetch('/api/exchange-rates');
        const rates = await response.json();
        setExchangeRate(rates);
      } catch (error) {
        console.error('Failed to fetch exchange rates:', error);
      }
    };

    fetchExchangeRates();
  }, []);

  const convertAmount = (amount, fromCurrency, toCurrency) => {
    if (!exchangeRate) return amount;
    return amount * exchangeRate[`${fromCurrency}_to_${toCurrency}`];
  };

  const btcAmount = 0.0001;
  const displayAmount = selectedCurrency === 'btc' 
    ? btcAmount 
    : convertAmount(btcAmount, 'btc', selectedCurrency);

  return (
    <div>
      <div style={{ marginBottom: '1rem' }}>
        <label>
          Display Currency:
          <select 
            value={selectedCurrency} 
            onChange={(e) => setSelectedCurrency(e.target.value)}
          >
            <option value="btc">Bitcoin (BTC)</option>
            <option value="usd">US Dollar (USD)</option>
            <option value="eur">Euro (EUR)</option>
            <option value="gbp">British Pound (GBP)</option>
          </select>
        </label>
      </div>

      <BitcoinTipJar
        address="bc1qxy2kgdygjrsqtzq2n0yrf2493p83kkfjhx0wlh"
        amount={btcAmount}
        currency={selectedCurrency}
        displayAmount={displayAmount}
      />
    </div>
  );
}
```

## Custom Validation

```javascript
// Custom validation and error handling
class ValidatedTipJar extends HTMLElement {
  constructor() {
    super();
    this.tipJar = document.createElement('bitcoin-tip-jar');
    this.setupValidation();
  }

  setupValidation() {
    this.tipJar.addEventListener('tip-initiated', (event) => {
      const amount = event.detail.amount;
      
      // Validate minimum amount
      if (amount < 0.00001) {
        this.showError('Minimum tip amount is 0.00001 BTC');
        event.preventDefault();
        return;
      }

      // Validate maximum amount
      if (amount > 0.01) {
        this.showError('Maximum tip amount is 0.01 BTC');
        event.preventDefault();
        return;
      }

      // Validate address format
      const address = this.getAttribute('address');
      if (!this.isValidBitcoinAddress(address)) {
        this.showError('Invalid Bitcoin address');
        event.preventDefault();
        return;
      }
    });
  }

  isValidBitcoinAddress(address) {
    // Basic Bitcoin address validation
    const bech32Regex = /^bc1[a-z0-9]{39,59}$/;
    const legacyRegex = /^[13][a-km-zA-HJ-NP-Z1-9]{25,34}$/;
    return bech32Regex.test(address) || legacyRegex.test(address);
  }

  showError(message) {
    // Show error message to user
    const errorDiv = document.createElement('div');
    errorDiv.className = 'tip-jar-error';
    errorDiv.textContent = message;
    errorDiv.style.cssText = `
      color: #ef4444;
      background: #fef2f2;
      border: 1px solid #fecaca;
      border-radius: 4px;
      padding: 8px 12px;
      margin-top: 8px;
      font-size: 14px;
    `;
    
    this.appendChild(errorDiv);
    
    // Remove error after 5 seconds
    setTimeout(() => {
      if (errorDiv.parentNode) {
        errorDiv.parentNode.removeChild(errorDiv);
      }
    }, 5000);
  }

  connectedCallback() {
    this.appendChild(this.tipJar);
  }
}

customElements.define('validated-tip-jar', ValidatedTipJar);
```
